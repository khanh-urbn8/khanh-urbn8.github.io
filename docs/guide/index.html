<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction | URBN8 Docs</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/docs/assets/css/0.styles.526c2b57.css" as="style"><link rel="preload" href="/docs/assets/js/app.87410f2b.js" as="script"><link rel="preload" href="/docs/assets/js/2.4d4909d1.js" as="script"><link rel="preload" href="/docs/assets/js/14.38baebe2.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.c34a50cc.js"><link rel="prefetch" href="/docs/assets/js/11.542d4a3d.js"><link rel="prefetch" href="/docs/assets/js/12.79b51e30.js"><link rel="prefetch" href="/docs/assets/js/13.683bb4a9.js"><link rel="prefetch" href="/docs/assets/js/15.6fccb9e1.js"><link rel="prefetch" href="/docs/assets/js/16.efcf5f1e.js"><link rel="prefetch" href="/docs/assets/js/3.f2a5f938.js"><link rel="prefetch" href="/docs/assets/js/4.0de5b305.js"><link rel="prefetch" href="/docs/assets/js/5.b0f3b142.js"><link rel="prefetch" href="/docs/assets/js/6.afdef3b0.js"><link rel="prefetch" href="/docs/assets/js/7.609945ca.js"><link rel="prefetch" href="/docs/assets/js/8.ffcef182.js"><link rel="prefetch" href="/docs/assets/js/9.058946e8.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.526c2b57.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">URBN8 Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Data portal
</a></div><div class="nav-item"><a href="/docs/general/password.html" class="nav-link">
  General
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Data portal
</a></div><div class="nav-item"><a href="/docs/general/password.html" class="nav-link">
  General
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/guide/" aria-current="page" class="active sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/guide/#quy-trinh-check-in-code-vao-nhanh-chinh-master" class="sidebar-link">Quy trình check-in code vào nhánh chính master:</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#good-article-collection" class="sidebar-link">Good article collection</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#technical-notice" class="sidebar-link">Technical notice</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#loi-ngo" class="sidebar-link">Lời ngỏ</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#vi-du" class="sidebar-link">Ví dụ</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#vai-luu-y" class="sidebar-link">Vài lưu ý:</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#tum-lai-la" class="sidebar-link">Túm lại là:</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#muc-tieu-cua-chung-ta-la" class="sidebar-link">Mục tiêu của chúng ta là:</a></li></ul></li><li><a href="/docs/guide/test.html" class="sidebar-link">Tips for writing test cases</a></li><li><a href="/docs/guide/structure.html" class="sidebar-link">Project structure</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h1> <h2 id="quy-trinh-check-in-code-vao-nhanh-chinh-master"><a href="#quy-trinh-check-in-code-vao-nhanh-chinh-master" class="header-anchor">#</a> Quy trình check-in code vào nhánh chính master:</h2> <ol><li>Dev code complete, tạo pull request, rebase, chạy tests, tự review...</li> <li>Dev đưa merge request qua cho code reviewer trên slack</li> <li>Code reviewer review, feedback, thảo luyện...</li> <li>Review ok, reviewer approve, đánh dấu approved trên slack bằng icon :good_job2:</li> <li>Dev tự canh merge code vào &quot;thời điểm thích hợp nhất&quot;.</li> <li>Dev đánh dấu merged bằng icon :merged:</li> <li>Lúc này CI chạy, nếu fail thì dev sẽ là người đầu tiên investigate để khiến CI green lại sớm nhất có thể để ko block team.</li></ol> <h2 id="good-article-collection"><a href="#good-article-collection" class="header-anchor">#</a> Good article collection</h2> <ul><li><p><a href="https://anonystick.com/blog-developer/vi-sao-foreach-khong-support-async-await-2020052381240532#t-1" target="_blank" rel="noopener noreferrer">Vì sao foreach không support async await<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://thevaluable.dev/abstraction-type-software-example/" target="_blank" rel="noopener noreferrer">Abstraction in Software with Examples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://begriffs.com/posts/2018-03-20-user-defined-order.html" target="_blank" rel="noopener noreferrer">User-defined Order in SQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://stackoverflow.com/questions/23303463/dealing-with-concurrency-issues-when-caching-for-high-traffic-sites" target="_blank" rel="noopener noreferrer">&quot;Cache miss-storm&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h2 id="technical-notice"><a href="#technical-notice" class="header-anchor">#</a> Technical notice</h2> <h3 id="hi-channel"><a href="#hi-channel" class="header-anchor">#</a> Hi @channel,</h3> <p><em>Bổn cũ</em>:</p> <ul><li>Stateful component không chứa styling</li> <li>Và Stateless component không chọt thẳng vào store
example: (lạt bỏ)
Nói cách khác là:</li> <li>Stateless component tập trung vào render UI theo props/driver mà nó nhận được.</li> <li>Store tập trung các business logics.</li> <li>Stateful component là cầu nối gắn stores và stateless components lại với nhau.
Lý do trực tiếp là vì mình muốn có thể test visual regression tất cả các styles, mà stateful component thì không dựng thành storybook scenario để chụp hình được
Lý do sâu xa là vì mình muốn tách bạch giữa stateful vs stateless, data flow vs styling vì mục đích ease of maintanance cho người code vào phần đó sau này (cũng có khi chính là người code ban đầu 6 tháng sau quay lại update code)
Developer spends most of the time reading and understanding code, than actually writing it. Coding activity is 75% of time understanding code, 20% of time modifying existing code and only 5% writing new.</li></ul> <hr> <p><em>Bổn mới</em>:
Bài trên lúc trước mềnh có gửi mọi người rồi. Giờ soạn lại vì giờ có thứ liên quan:</p> <h2 id="loi-ngo"><a href="#loi-ngo" class="header-anchor">#</a> Lời ngỏ</h2> <p>Một thời gian qua chúng ta dùng ui interaction test bằng cypress có vẻ không ngon: một phần vì thời gian chạy test quá lâu, tests cũng khá flaky, và cơ chế mock api cũng ko có độ tin cậy cao nên khó bảo trì và bắt lỗi.
Nhưng nếu không có interaction tests thì có một lỗ trống trong FE testing đó là business logics ko được test. Mà code không test được thì dễ bug, nhất là khi cập nhật, refactor.
Stateless components thì đã được test bởi visual regression test khá là ngon. Vậy còn business logics thì giờ sao?
Đấy chính là sự sinh ra đời của unit test cho stores của chúng ta.</p> <h2 id="vi-du"><a href="#vi-du" class="header-anchor">#</a> Ví dụ</h2> <p>https://github.com/EarthToday/earthtoday-ui-react/blob/unit_test/src/stores/CreateCardStore.test.ts</p> <h2 id="vai-luu-y"><a href="#vai-luu-y" class="header-anchor">#</a> Vài lưu ý:</h2> <ul><li>Dependencies của một store sẽ thông qua interfaces (external interfacings/contracts với dependencies bên ngoài)
https://github.com/EarthToday/earthtoday-ui-react/blob/unit_test/src/stores/CreateCardStore.ts#L98-L104
Cái này có dính líu tí tới chữ I trong SOLID principle. Ai muốn có thể tìm hiểu thêm.</li> <li>Khi test, mình sẽ mock những dependencies của store đang test để tập trung test internal implementations của store đang test.
Ví dụ: https://github.com/EarthToday/earthtoday-ui-react/blob/unit_test/src/stores/CreateCardStore.test.ts#L985-L1034</li></ul> <h2 id="tum-lai-la"><a href="#tum-lai-la" class="header-anchor">#</a> Túm lại là:</h2> <ol><li>UI elements gồm element stylings, bố cục layouts, trạng thái UI khi thay đổi như hover... là ở lớp Stateless Component.</li> <li>FE business logics gom hết vào stores.</li> <li>Stateful components là lớp mỏng nối Store với Stateless Component.</li></ol> <h2 id="muc-tieu-cua-chung-ta-la"><a href="#muc-tieu-cua-chung-ta-la" class="header-anchor">#</a> Mục tiêu của chúng ta là:</h2> <ul><li>(1) sẽ được cover bởi automated visual regression tests.</li> <li>(2) sẽ dược cover bởi automated unit tests như trên</li> <li>cái (3) là cái mà mình sẽ hở, nên mình giữ nó càng mỏng, càng ít code càng tốt, và tuyệt đối ko chứa những thứ thuộc về (1) và (2)
Cái (3) hãy để anh chị em ở thế giới QA chăm sóc nó thông qua e2e dùng cypress. Anh em FE devs chúng ta hãy về với vùng đất visual regression và unit tests.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/docs/guide/test.html">
        Tips for writing test cases
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/docs/assets/js/app.87410f2b.js" defer></script><script src="/docs/assets/js/2.4d4909d1.js" defer></script><script src="/docs/assets/js/14.38baebe2.js" defer></script>
  </body>
</html>
